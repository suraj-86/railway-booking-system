{% extends "base.html" %}

{% block title %}Train Schedule - Railway System{% endblock %}
{% block header %}Train Schedule{% endblock %}

{% block content %}

<div class="search-form-container">
    <form action="{{ url_for('schedule') }}" method="GET" class="schedule-search-form">
        <div class="form-row">
            <div class="form-group">
                <label for="origin">Origin</label>
                <select id="origin" name="origin">
                    <option value="">All Origins</option>
                    {% for o in origins %}
                        <option value="{{ o.origin }}" {% if o.origin == search_origin %}selected{% endif %}>{{ o.origin }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="destination">Destination</label>
                <select id="destination" name="destination">
                    <option value="">All Destinations</option>
                     {% for d in destinations %}
                        <option value="{{ d.destination }}" {% if d.destination == search_destination %}selected{% endif %}>{{ d.destination }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-actions">
            <button type="submit" class="cta-button">Search Trains</button>
            <a href="{{ url_for('schedule') }}" class="clear-button">Clear Search</a>
        </div>
    </form>
</div>


<div class="schedule-list">
    <h3>Available Trains</h3>
    {% if trains %}
        <table>
            <thead>
                <tr>
                    <th>Train Name</th>
                    <th>Origin</th>
                    <th>Destination</th>
                    <th>Departure Time</th>
                    <th>Running Days</th>
                </tr>
            </thead>
            <tbody>
                {% for train in trains %}
                <tr>
                    <td>{{ train.train_name }}</td>
                    <td>{{ train.origin }}</td>
                    <td>{{ train.destination }}</td>
                    <td>{{ train.departure_time }}</td>
                    <td>{{ train.running_days }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="no-trains">No trains found matching your search criteria.</p>
    {% endif %}
</div>
{% endblock %}

